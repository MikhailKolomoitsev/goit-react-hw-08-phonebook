(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),s=(n(90),n(91),n(154)),i=n(9),l=n(14),u=Object(l.b)("contacts/changeFilter"),b=(Object(l.b)("contacts/AddContactRequest"),Object(l.b)("contacts/addContactSuccess"),Object(l.b)("contacts/addContactError"),Object(l.b)("contacts/deleteContactRequest"),Object(l.b)("contacts/deleteContactSuccess"),Object(l.b)("contacts/deleteContactError"),n(152)),d=n(2);function j(){var e=Object(s.a)(),t=Object(i.c)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(b.a,{id:e,label:"Filter via name",type:"text",onChange:function(e){t(u(e.target.value))}})})}var m=n(37),h=n.n(m),p=n(54),O=n(25),f=n.n(O);f.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=Object(l.c)("contacts/fetchContacts",function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,f.a.get("/contacts");case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(l.c)("contacts/addContact",function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,r,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.number,c=n.rejectWithValue,e.prev=2,e.next=5,f.a.post("/contacts",{name:a,number:r});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(l.c)("contacts/deleteContact",function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,f.a.delete("contacts/".concat(t));case 4:return e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),w=n(36),y=n(153),k={name:"",number:""};var C=Object(i.b)(null,(function(e){return{onSubmit:function(t){return e(v(t))}}}))((function(e){var t=e.onSubmit,n=(Object(i.c)(),Object(a.useCallback)((function(e){var t={};return e.name?e.name.length<2&&(t.name="Invalid name\ud83d\ude22"):t.name="Required\ud83e\uddd0",e.number?(e.number.length<7||e.number.length>15)&&(t.number="Invalid value, number should have  7-15 symbols\ud83d\ude09"):t.number="Required\ud83e\uddd0",t}),[]));return Object(d.jsx)(w.b,{initialValues:k,validate:n,onSubmit:function(e,n){n.setSubmitting;var a=e.name,r=e.number;t({name:a,number:r})},children:function(e){var t=e.values,n=e.errors,a=e.touched,r=e.handleChange,c=e.handleBlur,o=e.handleSubmit,s=e.isSubmitting;return Object(d.jsxs)("form",{onSubmit:o,children:[Object(d.jsx)(b.a,{fullWidth:!0,style:{maxWidth:"350px"},id:"name",name:"name",label:"Name",type:"text",value:t.name,onChange:r,onBlur:c,error:a.name&&Boolean(n.name),helperText:a.name&&n.name}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{fullWidth:!0,style:{maxWidth:"350px"},id:"login",name:"number",label:"Number",type:"number",value:t.number,onChange:r,onBlur:c,error:a.number&&Boolean(n.number),helperText:a.number&&n.number}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(y.a,{color:"primary",variant:"contained",type:"submit",disabled:s||!(Object.keys(a).length===Object.keys(k).length&&0===Object.keys(n).length),children:"Add contact"})]})}})})),S=n(38),B=function(e){return e.user.token},W=Object(S.a)([function(e){return e.filter},function(e){return e.contacts.entities}],(function(e,t){if(e){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))}return t}));var P=Object(i.b)(null,(function(e){return{onClick:function(t){return e(g(t))}}}))((function(e){var t=e.onClick,n=Object(i.c)();Object(a.useEffect)((function(){n(x())}),[n]);var r=Object(i.d)(W);return Object(d.jsx)("ul",{children:r.length>0&&r.map((function(e){var n=e.id,a=e.name,r=e.number;return Object(d.jsxs)("li",{children:[a," ",r,Object(d.jsx)("button",{type:"button",id:n,onClick:function(e){return t(e.target.id)},children:"delete"})]},n)}))})})),R=n(26),E="https://connections-api.herokuapp.com",T=Object(l.e)({name:"user",initialState:{name:"",email:"",token:"",error:""},reducers:{registerSuccess:function(e,t){e.name=t.payload.name,e.email=t.payload.email,e.token=t.payload.token},registerFailure:function(e,t){e.error=t.payload.error},loginSuccess:function(e,t){e.name=t.payload.name,e.email=t.payload.email,e.token=t.payload.token},loginFailure:function(e,t){e.error=t.payload.error},logoutSuccess:function(e,t){e.user="",e.email="",e.token="",e.error=""},logoutFailure:function(e,t){}}}),A=T.actions,F=A.registerSuccess,I=A.registerFailure,q=A.loginSuccess,L=A.loginFailure,N=A.logoutSuccess,V=A.logoutFailure,Z=T.reducer,z=function(e){f.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){f.a.defaults.headers.common.Authorization=""};function _(){var e=Object(i.c)();return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h3",{children:"Phonebook"}),Object(d.jsx)(C,{}),Object(d.jsx)(y.a,{variant:"outlined",color:"red",onClick:function(){var t;e((function(e){return e({type:"LOGOUT_REQUEST"}),f.a.post("".concat(E,"/users/logout"),t).then((function(t){e(N(t.data)),U()})).catch((function(t){e(V({error:t.toString()}))}))}))},children:"Logout"}),Object(d.jsx)("br",{}),Object(d.jsx)(j,{}),Object(d.jsx)("h3",{children:"Contacts"}),Object(d.jsx)(P,{})]})}var G="/goit-react-hw-08-phonebook",H="/registration",Q="/login",J=n(52),$=n(29),D={name:"",email:"",passwrod:"",confirmPassword:""},M=function(){var e=Object(i.c)(),t=Object(a.useState)(!1),n=Object(J.a)(t,2),r=n[0],c=n[1],o=Object(a.useCallback)((function(){c((function(e){return!e}))}),[]),s=Object(a.useCallback)((function(e){var t={};return e.name?e.name.length<2&&(t.name="Invalid name\ud83d\ude22"):t.name="Required\ud83e\uddd0",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address\ud83d\ude22"):t.email="Required\ud83e\uddd0",e.password?(e.password.length<7||e.password.length>15)&&(t.password="Invalid value, password should have  7-15 symbols\ud83d\ude09"):t.password="Required\ud83e\uddd0",e.confirmPassword?e.confirmPassword.length<7||e.confirmPassword.length>15?t.confirmPassword="Invalid value, password should have  7-15 symbols\ud83d\ude09":e.confirmPassword!==e.password&&(t.confirmPassword="Passwords do not match\ud83d\ude22"):t.confirmPassword="Required\ud83e\uddd0",t}),[]),l=Object(a.useCallback)((function(t,n){var a,r=n.setSubmitting,c=t.name,o=t.email,s=t.password;e((a={name:c,email:o,password:s},function(e){return e({type:"REGISTER_REQUEST"}),f.a.post("".concat(E,"/users/signup"),Object(R.a)({},a)).then((function(t){var n=t.data,a=n.user,r=a.name,c=a.email,o=n.token;z(o),e(F({name:r,email:c,token:o}))})).catch((function(t){e(I({error:t.toString()}))}))})),r(!1)}),[e]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Registration Form"}),Object(d.jsx)(w.b,{initialValues:D,validate:s,onSubmit:l,children:function(e){var t=e.isSubmitting,n=e.errors,a=e.touched,c=e.handleChange,s=e.handleBlur,i=e.values;return Object(d.jsxs)(w.a,{children:[Object(d.jsx)(b.a,{style:{maxWidth:"350px"},fullWidth:!0,id:"name",name:"name",label:"Name",type:"name",value:i.name,onChange:c,onBlur:s,error:a.name&&Boolean(n.name),helperText:a.name&&n.name}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{style:{maxWidth:"350px"},fullWidth:!0,id:"email",name:"email",label:"Email",type:"email",value:i.email,onChange:c,onBlur:s,error:a.email&&Boolean(n.email),helperText:a.email&&n.email}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{style:{maxWidth:"350px"},fullWidth:!0,id:"password",name:"password",label:"Password",type:r?"text":"password",value:i.password,onChange:c,onBlur:s,error:a.password&&Boolean(n.password),helperText:a.password&&n.password}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{style:{maxWidth:"350px"},fullWidth:!0,maxWidth:"50px",id:"password",name:"confirmPassword",label:"Confirm Password",type:r?"text":"password",value:i.confirmPassword,onChange:c,onBlur:s,error:a.confirmPassword&&Boolean(n.confirmPassword),helperText:a.confirmPassword&&n.confirmPassword}),Object(d.jsx)(y.a,{color:"success",size:"small",onClick:o,children:r?"Hide password":"Show password"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(y.a,{color:"primary",variant:"contained",type:"submit",disabled:t||!(Object.keys(a).length===Object.keys(D).length&&0===Object.keys(n).length),children:"Submit"})]})}}),Object(d.jsx)($.b,{to:Q,children:"Have an account? Login here!"})]})},K={email:"",password:""},X=function(){var e=Object(i.c)(),t=Object(a.useState)(!1),n=Object(J.a)(t,2),r=n[0],c=n[1],o=Object(a.useCallback)((function(){c((function(e){return!e}))}),[]),s=Object(a.useCallback)((function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address\ud83d\ude22"):t.email="Required\ud83e\uddd0",e.password?(e.password.length<7||e.password.length>15)&&(t.password="Invalid value, password should have  7-15 symbols\ud83d\ude09"):t.password="Required\ud83e\uddd0",t}),[]),l=Object(a.useCallback)((function(t,n){var a,r=n.setSubmitting,c=t.email,o=t.password;e((a={email:c,password:o},function(e){return e({type:"LOGIN_REQUEST"}),f.a.post("".concat(E,"/users/login"),Object(R.a)({},a)).then((function(t){var n=t.data,a=n.user,r=a.name,c=a.email,o=n.token;e(q({name:r,email:c,token:o})),z(t.data.token),console.log(f.a.defaults.headers.common.Authorization)})).catch((function(t){e(L({error:t.toString()}))}))})),r(!1)}),[e]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Login Form"}),Object(d.jsx)(w.b,{initialValues:K,validate:s,onSubmit:l,children:function(e){var t=e.values,n=e.errors,a=e.touched,c=e.handleChange,s=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting;return Object(d.jsxs)("form",{onSubmit:i,children:[Object(d.jsx)(b.a,{fullWidth:!0,style:{maxWidth:"350px"},id:"email",name:"email",label:"Email",type:"email",value:t.email,onChange:c,onBlur:s,error:a.email&&Boolean(n.email),helperText:a.email&&n.email}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{fullWidth:!0,style:{maxWidth:"350px"},id:"login",name:"password",label:"Password",type:r?"text":"password",value:t.password,onChange:c,onBlur:s,error:a.password&&Boolean(n.password),helperText:a.password&&n.password}),Object(d.jsx)(y.a,{color:"success",size:"small",onClick:o,children:r?"Hide password":"Show password"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(y.a,{color:"primary",variant:"contained",type:"submit",disabled:l||!(Object.keys(a).length===Object.keys(K).length&&0===Object.keys(n).length),children:"Submit"})]})}}),Object(d.jsx)("br",{}),Object(d.jsx)($.b,{to:H,children:"Do not have account? Register here!"})]})},Y=n(13),ee=n(53),te=["component"],ne=function(e){var t=e.component,n=Object(ee.a)(e,te),a=Object(i.d)(B);return Object(d.jsx)(Y.b,Object(R.a)(Object(R.a)({},n),{},{render:function(e){return a?Object(d.jsx)(t,Object(R.a)({},e)):Object(d.jsx)(Y.a,{to:H})}}))},ae=["component"],re=function(e){var t=e.component,n=Object(ee.a)(e,ae),a=Object(i.d)(B);return Object(d.jsx)(Y.b,Object(R.a)(Object(R.a)({},n),{},{render:function(e){return a?Object(d.jsx)(Y.a,{to:G}):Object(d.jsx)(t,Object(R.a)({},e))}}))},ce=n(151);function oe(){return Object(d.jsx)(a.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(Y.d,{children:Object(d.jsxs)(ce.a,{maxWidth:"sm",className:"Container",children:[Object(d.jsx)(ne,{component:_,path:G,exact:!0}),Object(d.jsx)(re,{path:H,exact:!0,component:M}),Object(d.jsx)(re,{path:Q,exact:!0,component:X})]})})})}var se,ie,le,ue=n(20),be=n(80),de=n(18),je=Object(l.d)([],(se={},Object(ue.a)(se,x.fulfilled,(function(e,t){return t.payload})),Object(ue.a)(se,v.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(be.a)(e),[n])})),Object(ue.a)(se,g.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),se)),me=Object(l.d)(!1,(ie={},Object(ue.a)(ie,x.pending,(function(){return!0})),Object(ue.a)(ie,x.fulfilled,(function(){return!1})),Object(ue.a)(ie,x.rejected,(function(){return!1})),Object(ue.a)(ie,v.pending,(function(){return!0})),Object(ue.a)(ie,v.fulfilled,(function(){return!1})),Object(ue.a)(ie,v.rejected,(function(){return!1})),ie)),he=Object(l.d)(null,(le={},Object(ue.a)(le,x.rejected,(function(e,t){return t.payload})),Object(ue.a)(le,x.pending,(function(){return null})),le)),pe=Object(l.d)("",Object(ue.a)({},u,(function(e,t){return t.payload}))),Oe=Object(de.b)({entities:je,isLoading:me,error:he}),fe=n(63),xe=n(77),ve=n.n(xe),ge=n(78),we=n.n(ge),ye={key:"auth",storage:ve.a,whitelist:["name","email","token"]},ke=Object(fe.a)(ye,Z),Ce=Object(l.a)({reducer:{contacts:Oe,filter:pe,user:ke},middleware:function(e){return e().concat(we.a)},devTools:!1}),Se=Object(fe.b)(Ce),Be=n(79);o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(i.a,{store:Ce,children:Object(d.jsx)(Be.a,{loading:"...",persistor:Se,children:Object(d.jsx)($.a,{children:Object(d.jsx)(oe,{})})})})}),document.getElementById("root"))},90:function(e,t,n){},91:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.3b191ce7.chunk.js.map